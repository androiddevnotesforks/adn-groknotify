!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="132e128a-7238-406c-bc56-c0f95f0dcec7",e._sentryDebugIdIdentifier="sentry-dbid-132e128a-7238-406c-bc56-c0f95f0dcec7")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{64210:function(e,t,n){n.d(t,{g:function(){return d}});var r=n(91841),s=n(90199),o=n(86331),i=n(94437),a=n(74198),c=n(46488);class l{constructor(e,t){this.set=e,this.get=t,this.activeModelId=r.ww.GROK,this.isRateLimited=!1,this.outputMode="auto",this.setConversationId=e=>{this.set(i.Z("conversationId",e))},this.setLastMessageId=e=>{this.set(i.Z("lastMessageId",e))},this.setSidePanelContent=e=>{this.set(i.Z("sidePanelContent",e))},this.setStreamedMessageId=e=>{this.set(i.Z("streamedMessageId",e))},this.setActiveModelId=e=>{this.set(i.Z("activeModelId",e))},this.setSelectedSystemPromptId=e=>{this.set(i.Z("selectedSystemPromptId",e))},this.setIsRateLimited=e=>{this.set(i.Z("isRateLimited",e))},this.setOptimisticMessageId=(0,s.f0)(this.set,"optimisticMessageId"),this.setOutputMode=(0,s.f0)(this.set,"outputMode")}}let d=(0,a.U)()((0,c.XR)((0,c.tJ)((e,t)=>new l(e,t),{name:"chat-preferences",partialize:e=>({outputMode:e.outputMode}),version:1})));!function(e){let t=new o.y("/chat/:chatId"),n=t.test(window.location.pathname);n&&e.setState({conversationId:n.chatId}),window.addEventListener("popstate",()=>{let n=t.test(window.location.pathname);n&&e.setState({conversationId:n.chatId})}),e.subscribe((e,n)=>{if(e.conversationId===n.conversationId)return;let r=new URLSearchParams(window.location.search);r.delete("q");let s=r.toString(),o="".concat(s?"?".concat(s):"");if(!e.conversationId){let e="/".concat(o);window.history.pushState({...window.history.state,as:e,url:e},"",e);return}let i=t.build({chatId:e.conversationId}),a="".concat(i).concat(o);window.history.pushState({...window.history.state,as:a,url:a},"",a)})}(d)},45727:function(e,t,n){n.d(t,{sZ:function(){return N},Fg:function(){return x},j2:function(){return p},jW:function(){return w},If:function(){return b}});var r=n(96342),s=n(64210),o=n(6418),i=n(8240),a=n(84209),c=n(95322),l=n(61645),d=n(44796),u=n(50547),f=n(18867),m=n(46346),h=n(74536);function g(e){let{date:t,className:n,noTooltip:s=!1}=e,{compact:a,full:c}=function(e){let t=new Date,n=(0,u.X)(t,e),r=(0,f.A)(t,e),s=(0,m.o)(t,e);return{compact:n<1?"<1m":r<1?"".concat(n,"m"):r<24?"".concat(r,"h"):s>=1?(0,h.WU)(e,"MMM d, yyyy"):(0,h.WU)(e,"MMM d"),full:(0,h.WU)(e,"h:mm a \xb7 MMM d, yyyy")}}(t);return s?(0,r.jsx)("span",{className:(0,i.cn)("text-secondary",n),children:a}):(0,r.jsxs)(o.u,{children:[(0,r.jsx)(o.aJ,{asChild:!0,children:(0,r.jsx)("span",{className:(0,i.cn)("hover:underline cursor-default text-secondary",n),children:a})}),(0,r.jsx)(o._v,{className:"bg-popover text-primary",children:c})]})}function p(e){let{webSearchResult:t}=e;return(0,r.jsxs)(o.u,{disableHoverableContent:!1,children:[(0,r.jsx)(o.aJ,{asChild:!0,children:(0,r.jsx)(v,{webSearchResult:t,className:"hover:opacity-100 transition-opacity"})}),(0,r.jsx)(o._v,{className:"max-w-sm text-base bg-popover text-primary rounded-2xl",children:(0,r.jsx)(x,{webSearchResult:t})})]})}let v=d.forwardRef((e,t)=>{let{webSearchResult:n,isClickable:s=!0,className:o,...a}=e,[l,u]=(0,d.useState)(!1),f=(0,i.cn)("inline-flex align-text-bottom items-center justify-center","my-0 rounded-md","bg-important border border-card-border",s?"opacity-75 hover:opacity-100":"opacity-100 ml-1.5",o),m=l?(0,r.jsx)(c.Z,{className:"size-3 m-[3px]"}):(0,r.jsx)("img",{className:"size-[18px] m-0 rounded-md",src:n.favicon,alt:"".concat(n.siteName," favicon"),onError:()=>u(!0)});return s?(0,r.jsx)("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring ring-offset-1 ml-1.5 rounded-md",...a,ref:t,children:(0,r.jsx)("div",{className:f,children:m})}):(0,r.jsx)("div",{className:f,...a,ref:t,children:m})});function x(e){let{webSearchResult:t}=e;return(0,r.jsxs)("div",{className:"space-y-2 px-2 py-3 max-w-full",children:[(0,r.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,r.jsxs)("a",{href:t.url,className:"flex flex-row items-center gap-2 max-w-full",target:"_blank",rel:"noopener noreferrer",children:[(0,r.jsx)(v,{webSearchResult:t,className:"ml-0",isClickable:!1}),(0,r.jsx)("span",{className:"text-xs text-secondary hover:underline truncate flex-1",children:t.url.slice(0,100)})]})}),(0,r.jsx)("a",{href:t.url,className:"text-sm font-semibold hover:underline",target:"_blank",rel:"noopener noreferrer",children:t.title}),(0,r.jsx)("p",{className:"text-sm",children:t.preview})]})}function b(e){let{xPost:t}=e;return(0,r.jsxs)(o.u,{disableHoverableContent:!1,children:[(0,r.jsx)(o.aJ,{asChild:!0,children:(0,r.jsx)(y,{xPost:t})}),(0,r.jsx)(o._v,{className:"max-w-sm text-base bg-popover text-primary rounded-2xl",children:(0,r.jsx)(w,{xPost:t})})]})}let y=d.forwardRef((e,t)=>{let{xPost:n,isClickable:s=!0,className:o,...a}=e,c=(0,i.cn)("inline-flex align-text-bottom","my-0 rounded-full","bg-important border border-card-border",s?"opacity-75 hover:opacity-100":"opacity-100 ml-1.5",o),l=(0,r.jsx)("img",{className:"size-[18px] m-0 rounded-full",src:n.profileImageUrl,alt:"".concat(n.name,"'s profile")});return s?(0,r.jsx)("a",{href:"https://x.com/".concat(n.username,"/status/").concat(n.postId),target:"_blank",rel:"noopener noreferrer",ref:t,className:"focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring ring-offset-1 ml-1.5 rounded-full",...a,children:(0,r.jsx)("div",{className:c,children:l})}):(0,r.jsx)("div",{className:c,...a,ref:t,children:l})});function w(e){let{xPost:t}=e,n=(0,d.useMemo)(()=>{var e,n;return(0,a.K)(parseInt(null!==(n=null===(e=t.createTime)||void 0===e?void 0:e.seconds)&&void 0!==n?n:"0",10))},[t.createTime]);return(0,r.jsxs)("div",{className:"px-2 py-3",children:[(0,r.jsx)("div",{className:"flex items-center gap-3 whitespace-nowrap overflow-hidden",children:(0,r.jsxs)("a",{href:"https://x.com/".concat(t.username,"/status/").concat(t.postId),target:"_blank",rel:"noopener noreferrer",className:"flex flex-row items-center gap-2",children:[(0,r.jsx)("img",{className:(0,i.cn)("inline-flex align-text-bottom size-10 rounded-full","bg-important border border-card-border"),src:t.profileImageUrl,alt:"".concat(t.name,"'s profile")}),(0,r.jsxs)("div",{className:"grow",children:[(0,r.jsx)("p",{className:"text-sm font-semibold hover:underline truncate text-primary",children:t.name}),(0,r.jsxs)("a",{href:"https://x.com/".concat(t.username),target:"_blank",rel:"noopener noreferrer",className:"text-sm text-secondary hover:underline",children:["@",t.username]})]})]})}),(0,r.jsx)("p",{className:"text-primary text-sm mt-3",children:t.text}),(0,r.jsx)("p",{className:"mt-1",children:(0,r.jsx)(g,{className:"text-sm",date:n,noTooltip:!0})})]})}function N(e){let{webSearchResults:t,xPosts:n}=e,o=(0,s.g)(l.Z("sidePanelContent")),a=(0,s.g)(l.Z("setSidePanelContent")),c=(0,d.useMemo)(()=>{if((null==o?void 0:o.type)!=="xPosts")return!1;let e=o.data.map(e=>e.citationId);return n.every((t,n)=>t.citationId===e[n])&&n.length===e.length},[o,n]),u=(0,d.useCallback)(()=>{if(c){a();return}a({type:"xPosts",data:n})},[c,n]),f=(0,d.useMemo)(()=>{if((null==o?void 0:o.type)!=="webSearchResults")return!1;let e=o.data.map(e=>e.url);return t.every((t,n)=>t.url===e[n])&&t.length===e.length},[o,t]),m=(0,d.useCallback)(()=>{if(f){a();return}a({type:"webSearchResults",data:t})},[f,t]);return 0===t.length&&0===n.length?null:(0,r.jsxs)("div",{className:"flex -ml-1 text-xs gap-2 mb-3 ",children:[n.length>0&&(0,r.jsxs)("div",{className:(0,i.cn)("flex flex-row items-center pr-2 py-1","rounded-full cursor-pointer bg-foreground","hover:bg-button-ghost-hover transition ease-in-out",c&&"ring-1 ring-ring"),onClick:u,children:[n.slice(0,3).map((e,t)=>(0,r.jsx)("div",{style:{zIndex:n.length-t},children:(0,r.jsx)(y,{xPost:e,isClickable:!1,className:(0,i.cn)("flex bg-popover border border-background","z-".concat(n.length-t),t>0&&"-ml-2")})})),(0,r.jsxs)("div",{className:"truncate ml-2",children:[n.length," \uD835\uDD4F posts"]})]}),t.length>0&&(0,r.jsxs)("div",{className:(0,i.cn)("flex flex-row items-center pr-2 py-1","rounded-full cursor-pointer bg-foreground","hover:bg-button-ghost-hover transition ease-in-out",f&&"ring-1 ring-ring"),onClick:m,children:[t.slice(0,3).map((e,n)=>(0,r.jsx)("div",{style:{zIndex:t.length-n},children:(0,r.jsx)(v,{webSearchResult:e,isClickable:!1,className:(0,i.cn)("flex bg-popover overflow-hidden border border-background","z-".concat(t.length-n),n>0&&"-ml-2")})})),(0,r.jsxs)("div",{className:"truncate ml-2",children:[t.length," web pages"]})]})]})}},36671:function(e,t,n){n.d(t,{O:function(){return a},default:function(){return i}});var r=n(96342),s=n(44796);let o=(0,s.createContext)(null);function i(e){let{children:t,envVars:n}=e;return(0,r.jsx)(o.Provider,{value:n,children:t})}function a(){let e=(0,s.useContext)(o);if(!e)throw Error("useEnvironment must be used within an EnvironmentProvider");return e}},71896:function(e,t,n){n.d(t,{default:function(){return f},useSession:function(){return u}});var r=n(96342);n(59662);var s=(0,n(67663).$)("3d55585550d3305c62709ccb2a9fef78be08f3d2"),o=n(44796),i=n(10940),a=n(74198),c=n(26436);let l=(0,o.createContext)(void 0),d=e=>(0,i.M)()(t=>({user:null==e?void 0:e.user,updateUser:e=>t(t=>({...t||{},user:{...t.user||{},...e}})),clearUser:()=>t(e=>({...e||{},user:void 0})),refreshSession:async()=>(0,c.Z)().then(e=>{t(e)}),anonUser:null==e?void 0:e.anonUser,refreshAnonUser:async(e,n)=>s({privateKey:n,anonUserId:e}).then(n=>{t(t=>({...t||{},anonUser:{anonUserId:e,expirationDate:n.challengeExpirationDate}}))})})),u=()=>{let e=(0,o.useContext)(l);if(!e)throw Error("useSession must be used within SessionStoreProvider");return(0,a.o)(e)};var f=e=>{let{initialData:t,children:n}=e,s=(0,o.useRef)();return s.current||(s.current=d(t)),(0,r.jsx)(l.Provider,{value:s.current,children:n})}},26436:function(e,t,n){n(59662);var r=n(67663);t.Z=(0,r.$)("4f6050e9caf7c9ac64f16c7979ce79be3e6ea7a3")},73806:function(e,t,n){n.d(t,{d:function(){return c},z:function(){return l}});var r=n(96342),s=n(51448),o=n(42063),i=n(44796),a=n(8240);let c=(0,o.j)(["inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50","[&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg]:-mx-0.5"],{variants:{variant:{primary:"bg-button-primary text-background hover:bg-button-primary-hover",secondary:"bg-button-secondary text-primary hover:bg-button-secondary-hover",card:"ring-1 ring-inset ring-card-border bg-card hover:bg-card-hover text-primary",ghost:"text-primary hover:bg-button-ghost-hover",ghostSecondary:"text-secondary hover:text-primary hover:bg-button-ghost-hover",text:"text-primary bg-transparent hover:underline",outline:"bg-background border border-card-border backdrop-blur-xl shadow-sm text-secondary hover:text-primary",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",link:"text-primary underline-offset-4 hover:underline"},size:{md:"h-9 rounded-xl px-3.5 py-2 text-base",icon:"h-10 w-10 rounded-xl",none:"",lg:"h-10 rounded-3xl px-4",pill:"h-9 rounded-full px-3.5 py-2 text-base",default:"h-9 px-4 py-2 rounded-lg",sm:"h-8 rounded-lg px-3 text-xs",iconSm:"h-6 w-6 rounded-full",noPadding:"h-9 rounded-lg"}},defaultVariants:{variant:"primary",size:"default"}}),l=i.forwardRef((e,t)=>{let{className:n,variant:o,size:i,asChild:l=!1,...d}=e,u=l?s.g7:"button";return(0,r.jsx)(u,{className:(0,a.cn)(c({variant:o,size:i,className:n})),ref:t,type:"button",...d})});l.displayName="Button"},72981:function(e,t,n){n.d(t,{OX:function(){return f},Qz:function(){return c},dy:function(){return a},iI:function(){return h},sc:function(){return u},u6:function(){return g},ze:function(){return m}});var r=n(96342),s=n(44796),o=n(53365),i=n(8240);let a=e=>{let{shouldScaleBackground:t=!0,...n}=e;return(0,r.jsx)(o.d.Root,{shouldScaleBackground:t,...n})};a.displayName="Drawer";let c=o.d.Trigger,l=o.d.Portal;o.d.Close;let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.d.Overlay,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80",n),...s})});d.displayName=o.d.Overlay.displayName;let u=s.forwardRef((e,t)=>{let{className:n,children:s,...a}=e;return(0,r.jsxs)(l,{children:[(0,r.jsx)(d,{}),(0,r.jsxs)(o.d.Content,{ref:t,className:(0,i.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[24px] bg-background",n),...a,children:[(0,r.jsx)("div",{className:"mx-auto mt-3 mb-2 h-2 w-[100px] rounded-full bg-secondary/80"}),s]})]})});u.displayName="DrawerContent";let f=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("grid gap-1.5 p-4 text-center sm:text-left",t),...n})};f.displayName="DrawerHeader";let m=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("mt-auto flex flex-col gap-2 p-4",t),...n})};m.displayName="DrawerFooter";let h=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.d.Title,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",n),...s})});h.displayName=o.d.Title.displayName;let g=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.d.Description,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...s})});g.displayName=o.d.Description.displayName},27399:function(e,t,n){n.d(t,{O:function(){return o}});var r=n(96342),s=n(8240);function o(e){let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-primary/10",t),...n})}},6418:function(e,t,n){n.d(t,{_v:function(){return d},aJ:function(){return l},pn:function(){return a},u:function(){return c}});var r=n(96342),s=n(11666),o=n(44796),i=n(8240);let a=s.zt,c=s.fC,l=s.xz,d=o.forwardRef((e,t)=>{let{className:n,sideOffset:o=4,...a}=e;return(0,r.jsx)(s.h_,{children:(0,r.jsx)(s.VY,{ref:t,sideOffset:o,className:(0,i.cn)("z-50 overflow-hidden rounded-md bg-popover px-3 py-1.5 text-xs text-popover-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...a})})});d.displayName=s.VY.displayName},91841:function(e,t,n){n.d(t,{$1:function(){return s},hv:function(){return i},rc:function(){return o},ww:function(){return r}});let r={GROK:"grok-latest"};function s(e){if(e===r.GROK)return"hi tibor"}function o(e){if(e===r.GROK)return"Our most intelligent model"}let i=Object.values(r)},27997:function(e,t,n){n.d(t,{w:function(){return s}});var r=n(44796);function s(){let[e,t]=r.useState(void 0);return r.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),n=()=>{t(window.innerWidth<768)};return e.addEventListener("change",n),t(window.innerWidth<768),()=>e.removeEventListener("change",n)},[]),!!e}},99196:function(e,t,n){n.d(t,{E:function(){return a},F:function(){return i}});var r=n(81959),s=n(61645),o=n(44796);function i(){let e=(0,r.F)(s.Z("theme"));return"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e}function a(e){(0,o.useLayoutEffect)(()=>{"dark"===e?(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark")):"light"===e&&(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light"))},[e])}},75050:function(e,t,n){n(59662);var r=n(67663);t.Z=(0,r.$)("26003da8824cdf66642cacdd55a36ec54f10752d")},86208:function(e,t,n){n.d(t,{x:function(){return o}});var r=n(39580),s=n(25082);function o(e){let{message:t}=(0,r.e$)(e);s.Am.error(t)}},8240:function(e,t,n){n.d(t,{cn:function(){return o}});var r=n(70594),s=n(24484);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}},90199:function(e,t,n){n.d(t,{H:function(){return m},Kn:function(){return p},MT:function(){return y},N7:function(){return x},Nh:function(){return g},Od:function(){return f},Qd:function(){return h},R3:function(){return v},ZN:function(){return u},f0:function(){return d},tM:function(){return b}});var r=n(27755),s=n(50212),o=n(61645),i=n(96362),a=n(82311),c=n(74198),l=n(46488);function d(e,t){return n=>{e(e=>({...e,[t]:n}))}}function u(e,t){return()=>{e(e=>({...e,[t]:!e[t]}))}}function f(e,t){return n=>{e(e=>({...e,[t]:r.Z([n],e[t])}))}}function m(e,t,n){return r=>{e(e=>({...e,[t]:{...e[t],...s.Z(o.Z(n),[r])}}))}}function h(e,t){return(n,r)=>{e(e=>({...e,[t]:{...e[t],[r]:n}}))}}function g(e,t){return(n,r)=>{e(e=>({...e,[t]:{...e[t],[r]:[...e[t][r]||[],n]}}))}}function p(e,t,n){return(r,s)=>{e(e=>({...e,[t]:{...e[t],[r]:e[t][r].filter(e=>e[n]!==s)}}))}}function v(e,t,n){return r=>{e(e=>({...e,[t]:{...e[t],...s.Z(o.Z(n),r)}}))}}function x(e,t,n,r){let{subscribe:s,setState:c}=e;return s(o.Z(t),e=>{c(i.Z(a.Z(n),r(e)))},{fireImmediately:!0})}function b(e,t,n,r){let{subscribe:s,setState:c}=e;try{let e=localStorage.getItem(n);if(null!=e){let n=JSON.parse(e);c(i.Z(a.Z(t),n))}}catch(e){localStorage.setItem(n,JSON.stringify(r))}s(o.Z(t),e=>{localStorage.setItem(n,JSON.stringify(e))})}function y(e){return(0,c.U)()((0,l.XR)((t,n)=>new e(t,n)))}},15497:function(e,t,n){n.d(t,{t:function(){return N}}),n(59662);var r=n(67663),s=(0,r.$)("75749a3b9e14897a84d8c69e2653116a0a2c90ea"),o=(0,r.$)("8d610cc6626a0b3c455ec1ad39756f61689e9f4b"),i=(0,r.$)("025fbd0ba0aee4074d91bc242120c8b365b8633d"),a=(0,r.$)("e17e083104e6a1b9a9acf765e1646b94bec6b860"),c=(0,r.$)("5ec726254208cf0648a48c0573051291be817a7f"),l=n(86208),d=n(90199),u=n(39580),f=n(21873),m=n.n(f),h=n(96362),g=n(7891);let p={},v={},x=[],b={},y={};class w{constructor(e,t){this.set=e,this.get=t,this.promiseById=p,this.byId=v,this.list=x,this.streamStateById=b,this.abortControllerById=y,this.upsertConversation=(0,d.H)(this.set,"byId","conversationId"),this.appendConversations=(0,d.R3)(this.set,"byId","conversationId"),this.removeConversation=(0,d.Od)(this.set,"byId"),this.idsertConversationPromise=(0,d.Qd)(this.set,"promiseById"),this.removeConversationPromise=(0,d.Od)(this.set,"promiseById"),this.idsertStreamStateById=(0,d.Qd)(this.set,"streamStateById"),this.removeStreamStateById=(0,d.Od)(this.set,"streamStateById"),this.idsertAbortControllerById=(0,d.Qd)(this.set,"abortControllerById"),this.removeAbortControllerById=(0,d.Od)(this.set,"abortControllerById"),this.fetchCreateConversation=e=>{var t;let n=this.get(),r=(0,u.Yf)(s)(e),o=null===(t=e.addResponseRequest)||void 0===t?void 0:t.conversationId;return o&&n.idsertConversationPromise(r,o),r.then(e=>{n.upsertConversation(e),n.idsertConversationPromise(r,e.conversationId)}),r},this.fetchUpdateConversation=e=>{let t=this.get(),n=(0,u.Yf)(c)(e);return t.idsertConversationPromise(n,e.conversationId),n.then(t.upsertConversation),n},this.fetchDeleteConversation=e=>{let t=this.get(),n=(0,u.Yf)(o)({conversationId:e});return t.removeConversation(e),t.removeConversationPromise(e),n},this.fetchListConversations=e=>{let t=this.get(),n=(0,u.Yf)(a)(e).then(e=>e.conversations);return n.then(e=>{t.set(t=>({promiseById:{...t.promiseById,...m().mapValues(m().keyBy(e,"conversationId"),e=>Promise.resolve(e))}})),t.appendConversations(e)}).catch(l.x),n},this.fetchGetConversation=e=>{let t=this.get();if(e in t.byId)return Promise.resolve(t.byId[e]);if(e in t.promiseById)return t.promiseById[e];let n=(0,u.Yf)(i)({conversationId:e});return t.set(h.Z(g.Z(["promiseById",e]),n)),n.then(t.upsertConversation),n}}}let N=(0,d.MT)(w);(0,d.N7)(N,"byId","list",Object.values)},81959:function(e,t,n){n.d(t,{F:function(){return o},y:function(){return i}});var r=n(90199);class s{constructor(e,t){this.set=e,this.get=t,this.theme="system",this.isIncognito=!1,this.setTheme=(0,r.f0)(this.set,"theme"),this.setIsIncognito=(0,r.f0)(this.set,"isIncognito")}}let o=(0,r.MT)(s);(0,r.tM)(o,"theme","theme","system");let i=["light","dark","system"]},2645:function(e,t,n){n.d(t,{Gv:function(){return r},Pw:function(){return s}});let r="production",s="production"==r},6090:function(e,t,n){var r=n(82866),s=n(44796),o=n(2645);t.default=e=>{let t=(0,r.useLogger)(e),n=(0,s.useMemo)(()=>({environment:o.Gv,route:window.location.href,isClientSide:!0,origin:window.location.origin}),[]);return o.Pw?{flush:t.flush,debug:(e,r)=>t.debug(e,r?{...n,...r}:r),info:(e,r)=>t.info(e,r?{...n,...r}:r),warn:(e,r)=>t.warn(e,r?{...n,...r}:r),error:(e,r)=>t.error(e,r?{...n,...r}:r),logHttpRequest:(e,r,s,o)=>t.logHttpRequest(e,r,s,o?{...n,...o}:o)}:{debug:console.debug,info:console.info,warn:console.warn,error:console.error,flush:()=>{},logHttpRequest:console.info}}},39580:function(e,t,n){n.d(t,{Su:function(){return r.S},aH:function(){return s.QueryClientProvider},Yf:function(){return c.Y},e$:function(){return l},sk:function(){return o.sk},Db:function(){return i.default},aM:function(){return a.default}});var r=n(87282),s=n(38843),o=n(65902),i=n(89271),a=n(22752),c=n(34642);n(82866),n(2645),n(6090),n(96342),n(44796);var l=e=>{if(!e)return{message:"Something went wrong."};try{if("object"==typeof e&&"message"in e&&"string"==typeof e.message){let t=e.message,n=e.message.indexOf(" [WKE=");-1!==n&&(t=e.message.substring(0,n));let r="Error: ",s=t.indexOf(r);-1!==s&&(t=t.substring(r.length));let o=t.match(/^\d+\s[A-Z_]+:\s([\s\S]+)/);if(o&&o.length>=1){let e={};if(o[1].split("\n").forEach(t=>{let n=t.split(":").map(e=>e.trim());if(2===n.length){let t=n[0],r=n[1];e[t]||(e[t]=[]),e[t].push(r)}}),Object.keys(e).length>0)return{message:"Please fix the errors before continuing.",details:e};return{message:o[1]}}}}catch(e){}return"string"==typeof e?{message:e}:{message:"Something went wrong."}};n(8e4),n(87243)},34642:function(e,t,n){n.d(t,{Y:function(){return i}});var r=n(8e4);function s(e){let t=/\[WKE=([a-zA-Z0-9\-_]+):([a-zA-Z0-9\-_]+)(:([a-zA-Z0-9\-_]+))?]/g,n=[],r=null;do null!==(r=t.exec(e))&&n.push({error:"".concat(r[1],":").concat(r[2]),field:r[4]});while(null!==r);return n}var o=n(87243);function i(e){return async t=>{let n=await e(t);if(n&&"object"==typeof n&&"error"in n){var i;throw new o.o({status:(0,r.d)(n.error),wellKnownErrors:(i=n.error)&&"object"==typeof i&&"message"in i&&"string"==typeof i.message?s(i.message):"string"==typeof i?s(i):[],message:n.error})}return n}}},8e4:function(e,t,n){var r,s;n.d(t,{d:function(){return o}}),(s=r||(r={})).Ok="0 OK",s.Cancelled="1 CANCELLED",s.Unknown="2 UNKNOWN",s.InvalidArgument="3 INVALID_ARGUMENT",s.DeadlineExceeded="4 DEADLINE_EXCEEDED",s.NotFound="5 NOT_FOUND",s.AlreadyExists="6 ALREADY_EXISTS",s.PermissionDenied="7 PERMISSION_DENIED",s.ResourceExhausted="8 RESOURCE_EXHAUSTED",s.FailedPrecondition="9 FAILED_PRECONDITION",s.Aborted="10 ABORTED",s.OutOfRange="11 OUT_OF_RANGE",s.Unimplemented="12 UNIMPLEMENTED",s.Internal="13 INTERNAL",s.Unavailable="14 UNAVAILABLE",s.DataLoss="15 DATA_LOSS",s.Unauthenticated="16 UNAUTHENTICATED";let o=e=>{if(e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message){for(let t in r)if(isNaN(Number(t))){let n=r[t];if(e.message.includes(n))return n}}}},87243:function(e,t,n){n.d(t,{o:function(){return r}});class r extends Error{constructor({status:e,wellKnownErrors:t,message:n}){super(n),this.status=e,this.wellKnownErrors=t}}},89271:function(e,t,n){var r=n(73493),s=n(34642);t.default=(e,t)=>(e.mutationFn&&(e.mutationFn=(0,s.Y)(e.mutationFn)),(0,r.useMutation)(e,t))},22752:function(e,t,n){var r=n(81119),s=n(34642);t.default=(e,t)=>(e.queryFn&&"function"==typeof e.queryFn&&(e.queryFn=(0,s.Y)(e.queryFn)),(0,r.useQuery)(e,t))}}]);