const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gzjw2629pxypzgw6.js","assets/lemv4z8z7gk39eh5.js","assets/bbqge6n6s1oo3m8q.js","assets/root-o5vuh9g4.css","assets/lt2ef0v2naysiy2l.js","assets/conversation-small-iybhw0ps.css","assets/elalmx8ck5l7i3jn.js","assets/h7m593bp4ayfx20n.js","assets/pcbzmtx4fgbka3lm.js","assets/o6uxxj59wwd0vs3h.js","assets/c4bxzbp1808foto4.js","assets/csjmdiqycnwqv9r7.js","assets/mn1nh5nafluqb0zf.js","assets/e9ioikt8tbassp1n.js","assets/oqxp7xd8oekmrayn.js","assets/ko9ryq875r77qz9j.js","assets/mmwacm2oz5glh3tg.js","assets/kpws2hmhwlr4j51g.js","assets/ngpfizqqb9onsju2.js","assets/b6besid35puipqnp.js","assets/dii6f0f58vjyxn3r.js","assets/pah0un9d5vytizt6.js","assets/k9i239fw3jmco37f.js","assets/g36btoko3xu1u3po.js","assets/jm0r787aq5qhv46g.js","assets/jemy6hsyipgeqz4b.js","assets/j0e9x6age48ds4le.js","assets/md3qrzfltjyzts14.js","assets/oxwf4hjk1kv97bd5.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{e6 as W,cg as z,ew as G,d$ as _,gx as y,aO as f,aP as x,ag as H,a2 as K,d4 as T,r as C,D as Q,cn as q,co as B,dA as Y,fG as X,N as $}from"./lemv4z8z7gk39eh5.js";import{r as o,j as e,ad as A,e as J,a as Z,c as ee,ac as u,d as I,f as se,u as ae}from"./bbqge6n6s1oo3m8q.js";import{hP as te,hQ as k,hR as re,hS as ie,hT as E,hU as h,he as oe,bN as m,bO as N,p as ne,hV as de,n as ce,cy as le,T as ue,r as he,z as me,hW as fe,cm as xe,hX as ge,hY as pe,cN as ve,cO as P,hZ as je,aM as be,h_ as we,h$ as ye,bw as Te,cx as Ce,dE as Ie,i0 as Ee,i1 as Ne,i2 as Pe,dF as Se,i3 as _e,i4 as Ae,cn as ke}from"./lt2ef0v2naysiy2l.js";import{C as Oe}from"./csjmdiqycnwqv9r7.js";import{a as O,u as F}from"./e9ioikt8tbassp1n.js";import{C as Fe}from"./g36btoko3xu1u3po.js";import{a as Ve}from"./ngpfizqqb9onsju2.js";import{C as De}from"./jemy6hsyipgeqz4b.js";function Le(){const a=te(t=>t.notifications),{activeThreadIds:s}=W();return o.useEffect(()=>{a.filter(r=>r.clientThreadId===void 0||s.has(r.clientThreadId)).map(r=>r.id).filter(r=>r!==void 0).forEach(r=>k(r))},[s,a]),a.length===0||z?null:e.jsx("div",{className:"fixed right-4 top-8 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse overflow-y-auto px-2 py-4",children:e.jsx(A,{children:a.map(t=>e.jsx(Me,{...t},t.id))})})}function Me({...a}){const s=J(),t=Z(),r=ee(),n=G(a.clientThreadId),d=()=>{n&&ie(s,t,n),a.id&&k(a.id)};return e.jsxs(u.div,{onClick:d,className:"inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border border-token-border-light bg-token-main-surface-primary px-3 py-3 align-middle shadow-lg",initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[e.jsx(re,{iconName:"openai",size:"medium",className:"border-token-secondary rounded-full border bg-token-main-surface-primary text-token-text-primary"}),e.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[e.jsx("div",{className:"w-full truncate text-sm font-medium text-token-text-primary",children:a.title??r.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),e.jsx("div",{className:"w-full truncate text-sm text-token-text-tertiary",children:a.subtitle??r.formatMessage({id:"qMEc8J",defaultMessage:"New Message"})})]})]})}const S=450;function Re({children:a,clientThreadId:s,isOpen:t,onClose:r}){const n=_();return e.jsxs(A,{children:[t&&n&&e.jsx(O,{clientThreadId:s,children:e.jsx(y,{children:e.jsx(E.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(u.div,{className:"h-full w-full bg-token-main-surface-secondary",...h}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx(u.div,{className:"relative shrink-0 border-r border-token-border-medium bg-token-main-surface-primary",style:{width:S},...h,children:e.jsx(Fe,{hideHeader:!0,hideTools:!0})}),e.jsx("div",{className:"relative flex-grow overflow-auto",children:a})]})]})})})}),t&&!n&&e.jsx(y,{children:e.jsx(E.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(u.div,{className:"h-full w-full bg-token-main-surface-secondary",...h}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:a}),e.jsx(u.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:S},...h,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(Ve,{clientThreadId:s,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},s)})})]})]})})})]})}const Ue=f(()=>x(()=>import("./gzjw2629pxypzgw6.js"),__vite__mapDeps([0,1,2,3,4,5]))),We=f(()=>x(()=>import("./elalmx8ck5l7i3jn.js"),__vite__mapDeps([6,1,2,3,4,5,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27])).then(a=>a.ImageEditor));function ze({clientThreadId:a}){const s=oe();o.useEffect(()=>{m.close()},[a]);let t;return s?.type===N.ADAVisualization?t=e.jsx(Ue,{clientThreadId:a,visualization:s.visualization}):s?.type===N.Image&&(t=e.jsx(We,{clientThreadId:a,messageId:s.messageId,image:s.image,allImages:s.allImages},s.image.asset_pointer)),e.jsx(Re,{clientThreadId:a,isOpen:s!=null,onClose:m.close,children:t})}function Ge(){const{clientThreadId:a,resetThread:s}=F();return ne({resetThreadAction:s,clientThreadId:a}),null}function He(){const{clientThreadId:a,currentModelId:s,isCompanionWindow:t}=F();return e.jsx(de,{conversationId:a,currentModelId:s,isActiveWindow:!t})}function Ke({clientThreadId:a,urlThreadId:s}){return ce({clientThreadId:a}),e.jsxs(le,{children:[e.jsx(He,{}),e.jsx(Ge,{}),e.jsxs(ue,{clientThreadId:a,children:[e.jsx(he,{clientThreadId:a,urlThreadId:s}),e.jsx(me,{}),e.jsx(De,{})]})]})}var Qe={};const qe=f(()=>x(()=>import("./oxwf4hjk1kv97bd5.js"),__vite__mapDeps([28,2,1,3,4,5,13,23,18,19,20,21,22,16,24,14,15,12,29])));function ts(a){const{urlThreadId:s,clientThreadId:t,prefetchSearch:r}=a;Be();const n=H(),d=I(),[g]=se(),[i,l]=o.useState(()=>s!==void 0?K.getClientNewThreadIdForServerThreadId(s)??s:t!==void 0?t:T());s!==void 0&&i!==s&&(C.getServerThreadId(i)===s||l(s));const V=fe(I());o.useEffect(()=>{s===void 0&&C.getServerThreadId(i)!==void 0&&l(T())},[s,i,V]);const D=xe(ke.workspaceId),L=_(),{eligible:p,isLoading:v,markAsViewed:j}=ge(),b=pe();o.useEffect(()=>{(d.pathname==="/"||d.pathname.startsWith("/c/"))&&ve({namespace:P.ChatPageLoad})==null&&(je({namespace:P.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),Q.addTiming("chatgpt.web.chatPage.mounted"))},[]);const w=be();o.useEffect(()=>{q(!0).then(c=>{c.force_login&&w({authType:"login"}),we.initializeAndGatherData(c),B.initializeAndGatherData(c)})},[w]),o.useEffect(()=>{const c=g.get(ye)==="true";n!==c&&Y.setIsTemporaryChatEnabled(c)},[n,g]),o.useEffect(()=>{d.state?.focusObject&&m.setFocusedObject(d.state.focusObject)},[d.state?.focusObject]),o.useEffect(()=>{!v&&p&&(j(),b())},[p,v,j,b]);const{isOpen:M,isLoading:R}=Te(),U=L?Ke:Oe;return e.jsx(X.Provider,{value:null,children:e.jsx(Ce,{children:e.jsxs(Ie,{clientThreadId:i,children:[e.jsx(Ee,{clientThreadId:i},D),!R&&M&&e.jsx(qe,{clientThreadId:i,setClientThreadId:l}),e.jsx(Ne,{}),e.jsx(Pe,{}),e.jsx(O,{clientThreadId:i,setClientThreadId:l,prefetchSearch:r,children:e.jsx(U,{urlThreadId:s,clientThreadId:i,setClientThreadId:l,prefetchSearch:r})}),e.jsx(ze,{clientThreadId:i}),e.jsx(Se,{clientThreadId:i}),e.jsx(_e,{}),e.jsx(Le,{}),e.jsx(Ae,{}),null]})})})}function Be(){ae({queryKey:["pingEdge"],queryFn:()=>$.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Qe.GOKU_SERVICE);export{ts as C,S as F};
//# sourceMappingURL=kz78ocyuw69em4ok.js.map
